# ESP32 + LVGL 精美时钟天气屏

你是一名资深嵌入式系统工程师和UI设计师。

请为我生成一个完整的 ESP32 项目方案和代码结构，目标是实现一个基于 LVGL 的精美时钟与天气显示设备。

---

## 一、硬件环境

* MCU：ESP32
* 显示屏：SPI TFT（CS / DC / RST / 背光PWM）
* 输入方式：仅有两个按键

  * BOOT (GPIO0)
  * RST
* 网络：WiFi
* 可选：一个 NeoPixel 状态灯
* 无触摸屏
* 无温湿度传感器（不要实现本地温湿度采集功能）

---

## 二、功能要求

### 1️⃣ 时钟主界面

* 显示当前时间（HH:MM）
* 支持 12/24 小时制
* 显示日期和星期
* 显示 WiFi 状态图标
* 显示时间同步状态
* 底部显示天气简要信息（图标 + 当前温度 + 简短描述）

---

### 2️⃣ 天气界面

* 当前温度
* 体感温度
* 天气图标
* 天气描述
* 风速
* 更新时间
* 未来小时预报（可选 6 条）
* 若离线，显示缓存数据并提示“数据过期”

⚠️ 所有天气数据来自在线 API

---

### 3️⃣ 网络与配网

由于只有 BOOT 和 RST 两个按键：

* 开机 5 秒内按住 BOOT → 进入 WiFi 配网模式
* 配网方式：AP + Web Portal（192.168.4.1）
* 可配置：

  * WiFi SSID
  * WiFi 密码
  * 城市或经纬度
  * 单位（℃/℉）
* 长按 BOOT 8 秒 → 清除配置并恢复出厂
* 所有配置存储在 NVS

---

### 4️⃣ 系统结构要求

请采用清晰的模块化架构：

* UI 模块（LVGL）
* WiFi 管理模块
* 天气服务模块
* 时间同步模块（SNTP）
* NVS 存储模块
* 按键管理模块
* 背光控制模块（PWM）

UI 和网络逻辑必须分离，避免阻塞界面刷新。

---

### 5️⃣ UI 设计风格要求

* 默认深色主题
* 现代简约风格
* 使用动画：

  * 页面切换淡入淡出
  * 时间数字变化过渡动画
* 界面层级清晰
* 不要信息过载

---

### 6️⃣ 刷新策略

* 天气更新间隔：15 分钟
* 网络失败采用指数退避重试
* 启动时优先加载缓存天气
* 断网时显示离线标识


---

## 设计目标

* 结构清晰
* 可扩展
* 商业产品级稳定性
* 低耦合
* 易维护

---

如果有优化建议，请主动提出。

